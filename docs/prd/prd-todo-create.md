# TODO作成PRD

このドキュメントには、TODO作成機能の要件を定義します。

## 概要（概要情報）

### 1. 機能概要

**機能名**: TODO作成

この機能は、ユーザーが新しいTODOを作成するための機能です。ユーザーはタイトルを入力して新しいTODOを登録できます。

**機能が提供する価値**: ユーザーがタスクをTODOとして登録し、管理を開始できるようにします。

### 2. 目的と背景

この機能が解決すべき課題を記述します。

- ユーザーが新しいタスクをTODOとして登録できるようにする
- シンプルな操作で新しいTODOを追加できるようにする
- 入力内容の妥当性を検証し、不正なデータの登録を防ぐ

## 詳細（具体的な要件）

### 3. 機能要件

#### 機能一覧

このPRDに含まれる機能：

- **TODO作成**: タイトルを入力して新しいTODOを登録する

#### 各機能の詳細仕様

##### TODO作成

**入力**: 
- ユーザーがタイトル入力フィールドに入力した文字列

**出力**: 
- TODO一覧に新しいTODO項目が追加表示される
- 入力フィールドがクリアされる

**処理の流れ**:

1. ユーザーがタイトル入力フィールドに文字を入力する
2. ユーザーが登録ボタンをクリック（またはEnterキーを押下）
3. クライアント側で入力値の検証を行う
4. 検証が成功した場合、APIを通じてTODOを作成する
5. 作成成功後、TODO一覧を更新する（またはリアルタイムで追加表示する）
6. 入力フィールドをクリアして次の入力に備える

**条件分岐やエッジケース**:

- タイトルが空文字の場合: エラーを表示し、登録処理を実行しない
- タイトルが100文字を超える場合: エラーを表示し、登録処理を実行しない
- タイトルに改行文字（`\n`）が含まれる場合: エラーを表示し、登録処理を実行しない
- タイトルにタブ文字（`\t`）が含まれる場合: エラーを表示し、登録処理を実行しない
- 登録ボタンの連打を防止する: 登録処理実行中は登録ボタンを無効化し、同じタスクの二重登録を防ぐ
- 通信エラーが発生した場合: エラーメッセージを表示する

#### ユーザーインターフェース要件（UI/UX要件）

##### 画面構成やレイアウト

- ページの最上部にTODO作成フォームを配置する
- フォームは以下の要素で構成される:
  - タイトル入力フィールド（テキスト入力）
  - 登録ボタン
- 入力フィールドと登録ボタンは横並び、または入力フィールドの下にボタンを配置する

##### インタラクションの詳細

- タイトル入力フィールドにフォーカスを当てて文字を入力できる
- Enterキーを押下すると登録処理が実行される
- 登録ボタンをクリックすると登録処理が実行される
- 登録処理実行中は、登録ボタンを無効化（`disabled`属性を設定）し、ローディングインジケータを表示する
- 登録処理完了後、入力フィールドを自動的にクリアする

##### 表示条件や状態遷移

- 初期状態: 入力フィールドは空、登録ボタンは有効
- 登録処理中: 登録ボタンは無効化、ローディングインジケータを表示
- 登録完了後: 入力フィールドをクリア、登録ボタンを有効化

##### 共通UI/UXルールへの準拠状況

本機能は共通UI/UXルール（`prd-common.md`）に準拠します。

#### データ要件

##### 必要なデータ項目

- 入力データ:
  - `title`: TODOのタイトル（文字列、必須、1文字以上100文字以下、改行・タブ文字不可）

- 出力データ（作成されたTODO）:
  - `id`: TODOの一意な識別子（整数）
  - `title`: TODOのタイトル（文字列）
  - `completed`: 完了状態（真偽値、初期値は`false`）
  - `createdAt`: 作成日時（文字列、ISO 8601形式）
  - `updatedAt`: 更新日時（文字列、ISO 8601形式）

##### データの形式や制約

- `title`の制約:
  - 必須項目
  - 1文字以上100文字以下
  - 改行文字（`\n`）を含んではならない
  - タブ文字（`\t`）を含んではならない
  - 前後の空白文字は許可する（トリムは行わない）

##### データの保存方法や取得方法

- データ送信: APIを通じてTODOを作成する

#### ビジネス上発生が想定されるエラーパターン

##### ビジネスロジック上のエラーケース

- **タイトルが空文字の場合**:
  - 登録操作を実行した際に検証エラーとして検出する
  - エラーメッセージ: "タイトルを入力してください。"
  - 表示方法: `window.alert()`で表示する（共通UI/UXルールに準拠）

- **タイトルが100文字を超える場合**:
  - 登録操作を実行した際に検証エラーとして検出する
  - エラーメッセージ: "タイトルは100文字以内で入力してください。"
  - 表示方法: `window.alert()`で表示する

- **タイトルに改行文字が含まれる場合**:
  - 登録操作を実行した際に検証エラーとして検出する
  - エラーメッセージ: "タイトルに改行を含めることはできません。"
  - 表示方法: `window.alert()`で表示する

- **タイトルにタブ文字が含まれる場合**:
  - 登録操作を実行した際に検証エラーとして検出する
  - エラーメッセージ: "タイトルにタブを含めることはできません。"
  - 表示方法: `window.alert()`で表示する

##### ユーザー操作によるエラーケース

- **登録ボタンの連打**:
  - 登録処理実行中は登録ボタンを無効化することで防止する
  - 処理が完了するまで、同じタイトルでの二重登録を防ぐ

##### 通信エラーケース

- **API通信エラー**:
  - API通信エラーが発生した場合、共通UI/UXルールに従い`window.alert()`でエラーメッセージを表示する
  - エラーメッセージ例: "TODOの登録に失敗しました。しばらく時間をおいて再度お試しください。"
  - エラー発生時も入力フィールドの内容は保持する（ユーザーが再入力する必要がないようにする）

### 4. 制約事項と前提条件

#### 制約事項

- 認証・認可機能はサンプルアプリのためスコープ外とする
- タイトルの文字数上限は100文字とする
- 改行文字とタブ文字は許可しない

#### 前提条件

前提条件は特にありません。

## 参考情報（補足情報）

### 5. 関連するPRD

#### 依存している機能PRD（この機能が動作するために必要な機能）

- `prd-home.md`: ホーム画面（TODO作成フォームを配置する画面）

#### 影響を受ける機能PRD（この機能の実装により変更が必要な機能）

- `prd-todo-display.md`: TODO表示機能（新規作成されたTODOを一覧に追加表示する必要がある）

#### 共通PRD

- `prd-common.md`: 対象ユーザー、用語集、共通UI/UXルールを参照

