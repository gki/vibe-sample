# PRD構成

このドキュメントには、Product Requirement Document（PRD）の構成とファイル管理方法を記載します。

## PRDファイルの管理構造

PRDは複数のファイルに分割して管理します：

- **機能ごとのPRD**: 各機能を個別のPRDファイルとして管理
- **共通PRD**: プロジェクト全体で共通する項目は共通PRDファイルとして管理
- **ファイル命名規則**: `prd-機能名.md`（例: `prd-todo-management.md`）、共通PRDは`prd-common.md`
- **配置場所**: `docs/prd/`ディレクトリに配置

複数のPRDを統合して全体像を把握する場合は、各PRDファイル間の関連を「関連するPRD」セクションで参照します。

## 共通PRDファイルの構成

プロジェクト全体で共通する項目を定義するファイル（`prd-common.md`）には以下のセクションを含めます：

### 対象ユーザーとペルソナ

プロダクト全体のターゲットユーザー層と具体的なペルソナを定義します。

記述すべき内容の例：
- プライマリユーザー層の特性
- 具体的なペルソナ（名前、属性、行動パターン、ニーズなど）
- セカンダリユーザー層（該当する場合）

### 用語集

プロジェクト全体で使用される専門用語の定義を記載します。

記述すべき内容の例：
- ドメイン固有の用語とその定義
- 技術的な用語の定義（プロジェクト固有の意味がある場合）
- 略語の展開と説明

### 共通UI/UXルール

プロジェクト全体で統一すべきUI/UXのルールを定義します。

記述すべき内容の例：
- **通信中、通信エラー時の共通ルール**
  - 画面表示時の通信（データ取得時）の表示方法
  - 画面操作時の通信（データ送信時）の表示方法
  - 通信エラー時の表示方法とエラーハンドリング
- **共通フィードバックUIルール**
  - エラーフィードバックの表示方法
  - ダイアログの使用方法と表示ルール
  - モーダルの使用方法と表示ルール
  - 成功時のフィードバック表示方法

## 個別PRDファイルの構成

各機能のPRDファイルには以下のセクションを順番に含めます：

### 概要（概要情報）

#### 1. 機能概要

この機能の目的と概要を簡潔に記述します。

記述すべき内容の例：
- 機能の名前
- 機能の目的（1〜2文で簡潔に）
- 機能が提供する価値

#### 2. 目的と背景

この機能が解決すべき課題を記述します。

記述すべき内容の例：
- 解決すべき課題や問題
- ユーザーのニーズとの関連
- 他機能との関係や位置づけ

### 詳細（具体的な要件）

#### 3. 機能要件

実装すべき機能の詳細な仕様を記述します。

記述すべき内容：

- **機能一覧**: このPRDに含まれる機能のリスト
- **各機能の詳細仕様**: 各機能の具体的な動作や挙動
  - 入力と出力
    - **注意**: 入力と出力は、ユーザーが実際に画面で目にする内容や操作を記載する。APIのリクエスト/レスポンス形式やデータ構造を記載しない
    - 入力: ユーザーが行う操作や入力内容（例：ボタンクリック、入力フィールドへの文字入力）
    - 出力: ユーザーが画面で目にする結果（例：TODOが一覧に追加表示される、画面の状態が変化する）
  - 処理の流れ
  - 条件分岐やエッジケース
- **ユーザーインターフェース要件（UI/UX要件）**
  - 画面構成やレイアウト
  - インタラクションの詳細
  - 表示条件や状態遷移
  - 共通UI/UXルールへの準拠状況（準拠しない場合は理由を明記）
    - **注意**: 共通UI/UXルールと完全に同じ場合は、「本機能は共通UI/UXルール（`prd-common.md`）に準拠します。」という1文で記載する。共通ルールと異なる部分がある場合のみ、その差異を明記する
- **データ要件**
  - 必要なデータ項目
  - データの形式や制約
  - データの保存方法や取得方法
  - **注意**: 
    - データの保存・取得方法については、抽象的な記述（例：「APIを通じて取得する」「APIを通じて送信する」）に留め、具体的な実装詳細（APIエンドポイント名、GraphQLクエリ名/ミューテーション名、クライアントライブラリ名、ファイルパスなど）は記載しない
    - 他の機能PRDで定義されているデータ要件に依存する場合は、詳細を記載せず「データ要件については、[機能名]機能（`prd-xxx.md`）に従います。」という記載で参照する
- **ビジネス上発生が想定されるエラーパターン**
  - ビジネスロジック上のエラーケース
  - ユーザー操作によるエラーケース
  - 各エラーケースでの表示方法や対処方法

#### 4. 制約事項と前提条件

業務的な制約事項と前提条件を記述します。

記述すべき内容の例：
- ビジネス上の制約（期間、リソース、業務ルールなど）
- 前提条件（外部サービスの利用、他システムとの連携、業務プロセス上の前提など）

**注意**: 
- 技術的な制約（使用する技術スタック、パフォーマンス要件など）は記載しない
- 他の機能の実装完了などの技術的な前提条件は記載しない
- 業務的な制約事項が特にない場合は、共通PRD（`prd-common.md`）の制約事項に準拠する旨を記載する
- 業務的な前提条件が特にない場合は、「前提条件は特にありません。」と記載する

### 参考情報（補足情報）

#### 5. 関連するPRD

他の機能PRDとの関連や依存関係、共通PRDへの参照を記載します。

記述すべき内容の例：
- 依存している機能PRD（この機能が動作するために必要な機能）
- 影響を受ける機能PRD（この機能の実装により変更が必要な機能）
- 共通PRD（`prd-common.md`）への参照

## 全体PRDファイル（オプション）

プロジェクト全体の概要を把握するためのPRDも定義可能です。個別PRDへの参照を含めて、全体像を説明します。

